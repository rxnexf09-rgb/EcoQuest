<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoQuest - Gamified Ecological Platform</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- REAL AI LIBRARIES (TensorFlow.js) -->
    <!-- 1. Core TensorFlow -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <!-- 2. Face Detection Model (BlazeFace) -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/blazeface"></script>
    <!-- 3. Object Detection Model (COCO-SSD) -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd"></script>

    <style>
        /* =========================================
           1. CSS VARIABLES & RESET
           ========================================= */
        :root {
            --primary-green: #00b894;
            --dark-green: #006266;
            --accent-yellow: #fdcb6e;
            --game-blue: #0984e3;
            --text-dark: #2d3436;
            --text-light: #636e72;
            --white: #ffffff;
            --bg-light: #f5fbf7;
            --input-bg: #f1f2f6;
            --danger: #d63031;
            --success: #2ecc71;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html, body {
            overflow-x: hidden; /* Prevents horizontal scroll on mobile */
        }

        body {
            font-family: 'Poppins', sans-serif;
            color: var(--text-dark);
            background-color: var(--white);
            line-height: 1.6;
            scroll-behavior: smooth;
        }

        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }

        /* =========================================
           2. NAVIGATION BAR
           ========================================= */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 5%;
            background: var(--white);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark-green);
            display: flex;
            align-items: center;
            gap: 10px;
            flex-shrink: 0;
        }
        .logo i { color: var(--primary-green); }
        
        .nav-right { display: flex; align-items: center; gap: 20px; }

        .nav-links { display: flex; gap: 20px; }
        .nav-links a {
            font-weight: 500;
            color: var(--text-light);
            transition: 0.3s;
            cursor: pointer;
            white-space: nowrap;
        }
        .nav-links a:hover { color: var(--primary-green); }

        /* Language Switcher */
        .lang-switch { position: relative; display: inline-block; }
        .lang-btn {
            background: none;
            border: 2px solid var(--primary-green);
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            color: var(--dark-green);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .lang-dropdown {
            display: none;
            position: absolute;
            right: 0;
            background-color: #f9f9f9;
            min-width: 100px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 10px;
            overflow: hidden;
        }
        .lang-dropdown a {
            color: black;
            padding: 12px 16px;
            display: block;
            font-size: 0.9rem;
        }
        .lang-dropdown a:hover { background-color: #f1f1f1; }
        .lang-switch:hover .lang-dropdown { display: block; }

        /* Buttons */
        .btn-cta {
            background-color: var(--primary-green);
            color: white;
            padding: 10px 25px;
            border-radius: 50px;
            font-weight: 600;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            white-space: nowrap;
        }
        .btn-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 184, 148, 0.3);
            background-color: var(--dark-green);
        }

        /* Profile Button */
        .btn-profile {
            background-color: var(--game-blue);
            color: white;
            padding: 10px 25px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            display: none; 
            align-items: center;
            gap: 8px;
            transition: 0.3s;
            white-space: nowrap;
        }
        .btn-profile:hover { background-color: #0c2461; }

        /* =========================================
           3. HERO SECTION
           ========================================= */
        .hero {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 4rem 5%;
            background: linear-gradient(135deg, var(--bg-light) 0%, #e0f2f1 100%);
            min-height: 90vh;
            overflow: hidden;
            position: relative;
        }
        .hero-text { flex: 1; max-width: 600px; z-index: 2; }
        .tagline {
            background: #dff9fb;
            color: var(--game-blue);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 20px;
        }
        .hero h1 {
            font-size: 3.5rem;
            line-height: 1.2;
            margin-bottom: 20px;
            color: var(--dark-green);
        }
        .hero p {
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 30px;
        }
        .hero-buttons { display: flex; gap: 15px; }
        
        .hero-image {
            flex: 1;
            position: relative;
            display: flex;
            justify-content: center;
            z-index: 1;
        }
        .phone-mockup {
            width: 300px;
            height: 600px;
            background: #2d3436;
            border-radius: 40px;
            border: 10px solid #2d3436;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }
        .phone-screen {
            background: url('https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80') center/cover;
            width: 100%;
            height: 100%;
            position: relative;
        }
        .floating-badge {
            position: absolute;
            background: white;
            padding: 10px 20px;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: float 3s ease-in-out infinite;
            white-space: nowrap;
            z-index: 3;
        }
        .fb-1 { top: 20%; left: 0; transform: translateX(-50%); }
        .fb-2 { bottom: 20%; right: 0; transform: translateX(20%); animation-delay: 1.5s; }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        /* =========================================
           4. STATS SECTION
           ========================================= */
        .stats {
            padding: 3rem 5%;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            text-align: center;
        }
        .stat-box { margin: 15px; flex: 1; min-width: 200px; }
        .stat-box h3 { font-size: 2.5rem; color: var(--primary-green); }
        .stat-box p { font-weight: 600; color: var(--text-dark); }
        
        /* =========================================
           5. PROCESS (HOW IT WORKS)
           ========================================= */
        .process { padding: 5rem 5%; text-align: center; }
        .section-header h2 { font-size: 2.5rem; color: var(--dark-green); margin-bottom: 10px; }
        .section-header p { color: var(--text-light); max-width: 600px; margin: 0 auto 50px auto; }
        
        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        .step-card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            transition: 0.3s;
        }
        .step-card:hover { transform: translateY(-5px); }
        .step-icon {
            width: 70px;
            height: 70px;
            background: #e0f2f1;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px auto;
            font-size: 1.8rem;
            color: var(--primary-green);
        }

        /* =========================================
           6. FEATURES & LEADERBOARD
           ========================================= */
        .features { padding: 5rem 5%; background: var(--dark-green); color: white; }
        .features-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: flex-start;
        }
        .feature-list h2 { font-size: 2.5rem; margin-bottom: 30px; }
        .feature-item { display: flex; gap: 20px; margin-bottom: 30px; }
        .f-icon {
            min-width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--accent-yellow);
        }
        
        .league-card {
            background: white;
            color: var(--text-dark);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            width: 100%;
        }
        .rank-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            background: #f1f1f1;
            padding: 5px;
            border-radius: 50px;
        }
        .tab-btn {
            flex: 1;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            background: transparent;
            color: #777;
            transition: 0.3s;
            font-size: 0.9rem;
        }
        .tab-btn.active {
            background: var(--primary-green);
            color: white;
            box-shadow: 0 4px 10px rgba(0,184,148,0.3);
        }
        
        .leaderboard-list { display: none; }
        .leaderboard-list.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
        
        .leaderboard-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
            font-weight: 600;
            font-size: 0.95rem;
        }
        .rank-info { display: flex; align-items: center; gap: 10px; }
        .rank-num {
            color: var(--accent-yellow);
            font-weight: 800;
            font-size: 1.2rem;
            width: 25px;
        }
        .rank-name { display: flex; flex-direction: column; line-height: 1.2; }
        .rank-badge { font-size: 0.75rem; color: #aaa; font-weight: 400; }
        .rank-pts { color: var(--primary-green); font-weight: 700; }

        /* =========================================
           7. GOOGLE MAP SECTION
           ========================================= */
        .map-section { padding: 5rem 5%; background: var(--bg-light); text-align: center; }
        #google-map {
            width: 100%;
            height: 500px;
            border-radius: 20px;
            margin-top: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border: 5px solid white;
        }
        .map-legend {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .legend-item { display: flex; align-items: center; gap: 5px; font-size: 0.9rem; font-weight: 600; }
        .dot { width: 10px; height: 10px; border-radius: 50%; }

        /* =========================================
           8. FOOTER
           ========================================= */
        footer { background: #2d3436; color: white; padding: 3rem 5%; text-align: center; }
        .footer-logo { font-size: 1.5rem; font-weight: bold; margin-bottom: 20px; display: inline-block;}
        .socials i { margin: 0 10px; font-size: 1.2rem; cursor: pointer; transition: 0.3s; }

        /* =========================================
           9. MODALS (SHARED STYLES)
           ========================================= */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 2000;
            display: none; justify-content: center; align-items: center;
            backdrop-filter: blur(5px);
            padding: 10px;
        }

        .modal-box {
            background: white; width: 100%; max-width: 450px;
            border-radius: 20px; padding: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            position: relative; animation: slideUp 0.3s ease-out;
            max-height: 90vh; overflow-y: auto;
        }
        
        .modal-box.wide { max-width: 600px; }

        @keyframes slideUp { from{transform:translateY(50px); opacity:0;} to{transform:translateY(0); opacity:1;} }

        .modal-close {
            position: absolute; top: 15px; right: 20px; font-size: 1.5rem;
            cursor: pointer; color: #aaa; transition: 0.2s;
        }
        .modal-close:hover { color: var(--text-dark); }

        /* AUTH MODAL SPECIFIC */
        .auth-tabs { display: flex; border-bottom: 2px solid #eee; margin-bottom: 20px; }
        .auth-tab-btn {
            flex: 1; padding: 10px; background: none; border: none; font-size: 1rem;
            font-weight: 600; color: #aaa; cursor: pointer; transition: 0.3s;
            border-bottom: 3px solid transparent;
        }
        .auth-tab-btn.active { color: var(--primary-green); border-color: var(--primary-green); }

        .auth-form { display: none; }
        .auth-form.active { display: block; }

        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-size: 0.9rem; font-weight: 600; }
        .form-control {
            width: 100%; padding: 12px; border: 2px solid var(--input-bg);
            background: var(--input-bg); border-radius: 10px; outline: none; transition: 0.3s;
        }
        .form-control:focus { border-color: var(--primary-green); background: white; }
        .form-row { display: flex; gap: 10px; } 

        .btn-submit {
            width: 100%; background: var(--primary-green); color: white;
            padding: 12px; border: none; border-radius: 10px; font-weight: bold;
            font-size: 1rem; cursor: pointer; transition: 0.3s; margin-top: 10px;
        }
        .btn-submit:hover { background: var(--dark-green); }
        
        .switch-link { text-align: center; margin-top: 15px; font-size: 0.9rem; }
        .switch-link span { color: var(--primary-green); cursor: pointer; font-weight: bold; }

        /* =========================================
           10. TASKS MENU STYLES
           ========================================= */
        .task-list { display: flex; flex-direction: column; gap: 15px; }
        .task-card {
            border: 2px solid var(--input-bg); border-radius: 15px; padding: 15px;
            transition: 0.3s; background: white;
        }
        .task-card:hover { border-color: var(--primary-green); }
        
        /* LOCKED STATE FOR COMPLETED TASKS */
        .task-card.completed {
            border-color: var(--primary-green);
            background-color: #f0fff4;
            opacity: 0.8;
            pointer-events: none; /* Disable clicking */
        }

        .task-header { display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        .task-info { display: flex; align-items: center; gap: 15px; }
        .task-icon {
            width: 40px; height: 40px; background: #e0f2f1; color: var(--primary-green);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            flex-shrink: 0;
        }
        .task-points {
            background: var(--accent-yellow); color: var(--text-dark);
            padding: 5px 12px; border-radius: 20px; font-weight: bold; font-size: 0.8rem;
            white-space: nowrap;
        }
        .task-upload-area {
            margin-top: 15px; padding-top: 15px; border-top: 1px dashed #ddd;
            display: none;
        }
        .task-upload-area.active { display: block; animation: fadeIn 0.3s; }
        .upload-box {
            border: 2px dashed #ccc; padding: 20px; text-align: center; border-radius: 10px;
            background: #fafafa; margin-bottom: 10px; cursor: pointer; transition: 0.2s;
        }
        .upload-box:hover { background: #f0f0f0; border-color: var(--primary-green); }
        .upload-box.has-file { background: #e0f2f1; border-color: var(--primary-green); }

        /* =========================================
           11. PROFILE / MY ACCOUNT STYLES
           ========================================= */
        .profile-header {
            text-align: center;
            background: linear-gradient(135deg, var(--primary-green), var(--game-blue));
            padding: 20px; border-radius: 15px; color: white; margin-bottom: 20px;
        }
        .profile-avatar {
            width: 80px; height: 80px; background: white; color: var(--dark-green);
            border-radius: 50%; margin: 0 auto 10px auto;
            display: flex; align-items: center; justify-content: center; font-size: 2rem;
            border: 4px solid rgba(255,255,255,0.3);
        }
        .profile-name { font-size: 1.5rem; font-weight: bold; }
        .profile-school { font-size: 0.9rem; opacity: 0.9; }
        
        .profile-stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .p-stat-box {
            background: var(--input-bg); padding: 15px; border-radius: 10px; text-align: center;
        }
        .p-stat-val { font-size: 1.5rem; font-weight: bold; color: var(--dark-green); }
        .p-stat-lbl { font-size: 0.8rem; color: #777; }
        
        .btn-logout {
            width: 100%; background: var(--danger); color: white;
            padding: 10px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;
        }

        /* =========================================
           12. AI PROCESSING MODAL STYLES
           ========================================= */
        #ai-processing-modal { z-index: 3000; }
        .ai-content { text-align: center; padding: 20px; }
        .spinner {
            width: 50px; height: 50px; border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-green); border-radius: 50%;
            animation: spin 1s linear infinite; margin: 0 auto 20px auto;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .ai-step { margin: 10px 0; font-size: 0.9rem; opacity: 0.5; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px;}
        .ai-step.active { opacity: 1; font-weight: bold; color: var(--dark-green); transform: scale(1.05); }
        .ai-step.error { color: #d63031; opacity: 1; font-weight: bold; }
        .ai-step.success { color: #00b894; opacity: 1; font-weight: bold; }
        
        /* Hidden Video for AI to scan */
        #ai-video-player { display: none; width: 320px; height: 240px; margin: 0 auto; background:black; }

        /* =========================================
           13. MOBILE RESPONSIVENESS (Media Queries)
           ========================================= */
        @media (max-width: 900px) {
            .hero { padding: 3rem 5%; }
            .hero h1 { font-size: 2.8rem; }
        }

        @media (max-width: 768px) {
            /* Nav: Stack elements on mobile */
            nav { flex-direction: column; gap: 15px; padding: 15px; }
            .nav-right { width: 100%; justify-content: center; flex-wrap: wrap; }
            .nav-links { 
                order: 3; width: 100%; justify-content: center; 
                flex-wrap: wrap; gap: 15px; font-size: 0.9rem; 
            }
            .logo { margin-bottom: 5px; }

            /* Hero: Stack text and image */
            .hero { flex-direction: column; text-align: center; padding-top: 2rem; justify-content: center; }
            .hero-text { margin-bottom: 40px; width: 100%; }
            .hero h1 { font-size: 2.3rem; }
            .hero-buttons { justify-content: center; }
            
            /* Phone: Make it smaller but visible */
            .phone-mockup { width: 220px; height: 440px; margin: 0 auto; }
            .floating-badge { font-size: 0.8rem; padding: 8px 12px; }
            
            /* Features: Stack columns */
            .features-grid { grid-template-columns: 1fr; }
            .feature-list h2 { font-size: 2rem; text-align: center; }
            
            /* Map */
            #google-map { height: 350px; }

            /* Forms */
            .form-row { flex-direction: column; gap: 15px; }

            /* Section Headers */
            .section-header h2 { font-size: 2rem; }
        }

        @media (max-width: 480px) {
            .nav-links { display: flex; flex-direction: row; flex-wrap: wrap; font-size: 0.8rem; }
            .hero h1 { font-size: 1.8rem; }
            .btn-cta, .btn-profile { padding: 8px 20px; font-size: 0.9rem; }
            .phone-mockup { width: 180px; height: 360px; }
            .fb-1 { left: 10%; } 
            .fb-2 { right: 0; }
            
            .stat-box h3 { font-size: 2rem; }
            
            .modal-box { padding: 20px; width: 95%; }
            .task-header h4 { font-size: 0.9rem; }
        }
    </style>
</head>
<body>

    <!-- Nav -->
    <nav>
        <div class="logo">
            <i class="fas fa-leaf"></i> EcoQuest
        </div>
        <div class="nav-right">
            
            <div class="lang-switch">
                <button class="lang-btn"><i class="fas fa-globe"></i> <span id="current-lang-text">EN</span></button>
                <div class="lang-dropdown">
                    <a href="#" onclick="setLanguage('en')">üá¨üáß English</a>
                    <a href="#" onclick="setLanguage('az')">üá¶üáø Az…ôrbaycanca</a>
                    <a href="#" onclick="setLanguage('ru')">üá∑üá∫ –†—É—Å—Å–∫–∏–π</a>
                </div>
            </div>

            <!-- Pre-Login CTA -->
            <a href="#" class="btn-cta" id="btn-join-trigger" data-lang="btn_join">Join Quest</a>
            
            <!-- Post-Login "My Account" Button -->
            <a href="#" class="btn-profile" id="btn-profile-trigger" onclick="openProfileModal()">
                <i class="fas fa-user-circle"></i> My Account
            </a>
        </div>
        
        <div class="nav-links">
            <a href="#how-it-works" data-lang="nav_how">How it Works</a>
            <a href="#features" data-lang="nav_league">Rankings</a>
            <a href="#map" data-lang="nav_map">Live Map</a>
            <a href="#" onclick="openTaskModal()" style="color:var(--primary-green); font-weight:bold;" data-lang="nav_tasks">Tasks <i class="fas fa-clipboard-check"></i></a>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero">
        <div class="hero-text">
            <div class="tagline" data-lang="hero_tag"><i class="fas fa-gamepad"></i> Gamified Ecological Awareness</div>
            <h1 data-lang="hero_title">Turn Environmental Action into a Game</h1>
            <p data-lang="hero_desc">Sort waste, plant trees, and clean your city to earn points. Join the Eco-League and help solve real environmental issues in Azerbaijan.</p>
            <div class="hero-buttons">
                <a href="#" class="btn-cta" onclick="openModal()" data-lang="btn_start">Start Now</a>
            </div>
        </div>

        <div class="hero-image">
            <div class="phone-mockup">
                <div class="phone-screen">
                    <div style="position:absolute; bottom:20px; left:20px; color:white; font-weight:bold; text-shadow:1px 1px 3px black;">
                        <i class="fas fa-video" style="color:#2ecc71"></i> <span data-lang="app_verified">AI Verified!</span><br>
                        <span style="font-size:1.5rem" data-lang="app_points">+50 Points</span>
                    </div>
                </div>
            </div>
            <div class="floating-badge fb-1">
                <i class="fas fa-medal" style="color: gold;"></i> <span data-lang="badge_level">Nature Hero</span>
            </div>
            <div class="floating-badge fb-2">
                <i class="fas fa-recycle" style="color: green;"></i> <span data-lang="badge_trees">Plastic Sorted</span>
            </div>
        </div>
    </section>

    <!-- Stats -->
    <section class="stats">
        <div class="stat-box">
            <h3>82%</h3>
            <p data-lang="stat_game">Students prefer Game-based Learning</p>
        </div>
        <div class="stat-box">
            <h3>71%</h3>
            <p data-lang="stat_parents">Parents want informed children</p>
        </div>
        <div class="stat-box">
            <h3>65%</h3>
            <p data-lang="stat_students">Willing to do Eco-tasks</p>
        </div>
    </section>

    <!-- How It Works -->
    <section class="process" id="how-it-works">
        <div class="section-header">
            <h2 data-lang="step_title">How EcoQuest Works</h2>
            <p data-lang="step_desc">Our AI-powered system makes saving the planet simple, fun, and rewarding.</p>
        </div>
        <div class="steps-grid">
            <div class="step-card">
                <div class="step-icon"><i class="fas fa-list-ul"></i></div>
                <h4 data-lang="step_1_title">1. Get a Task</h4>
                <p data-lang="step_1_desc">Receive a daily mission based on your city (e.g., "Sort plastic in Sumgait").</p>
            </div>
            <div class="step-card">
                <div class="step-icon"><i class="fas fa-video"></i></div>
                <h4 data-lang="step_2_title">2. Record Video</h4>
                <p data-lang="step_2_desc">Record a video completing the task. Your face must be visible!</p>
            </div>
            <div class="step-card">
                <div class="step-icon"><i class="fas fa-robot"></i></div>
                <h4 data-lang="step_3_title">3. AI Verification</h4>
                <p data-lang="step_3_desc">Our AI analyzes the video frame-by-frame to verify facial identity and task accuracy.</p>
            </div>
            <div class="step-card">
                <div class="step-icon"><i class="fas fa-trophy"></i></div>
                <h4 data-lang="step_4_title">4. Earn Rewards</h4>
                <p data-lang="step_4_desc">Get points, unlock "Nature Hero" badges, and climb the leaderboard.</p>
            </div>
        </div>
    </section>

    <!-- Features & Leaderboard -->
    <section class="features" id="features">
        <div class="features-grid">
            <div class="feature-list">
                <h2 data-lang="league_title">The Eco-League & Rankings</h2>
                <p style="margin-bottom:30px; opacity:0.9;" data-lang="league_desc">We rank both schools and individual students. Complete tasks to earn points and become the top Eco-Student in Azerbaijan!</p>
                <div class="feature-item">
                    <div class="f-icon"><i class="fas fa-school"></i></div>
                    <div>
                        <h4 data-lang="feat_1_title">Inter-School Competition</h4>
                        <p style="font-size:0.9rem; opacity:0.8;" data-lang="feat_1_desc">Schools compete for the "Green Flag" award.</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="f-icon"><i class="fas fa-user-astronaut"></i></div>
                    <div>
                        <h4 data-lang="feat_2_title">Student Levels</h4>
                        <p style="font-size:0.9rem; opacity:0.8;" data-lang="feat_2_desc">Progress from Eco Beginner to Green Leader.</p>
                    </div>
                </div>
            </div>

            <div class="league-card">
                <div class="rank-tabs">
                    <button class="tab-btn active" onclick="switchTab('school')" id="btn-school" data-lang="tab_schools">üè´ Top Schools</button>
                    <button class="tab-btn" onclick="switchTab('student')" id="btn-student" data-lang="tab_students">üë§ Top Students</button>
                </div>
                
                <!-- SCHOOL LIST (TOP 5) -->
                <div id="list-school" class="leaderboard-list active">
                    <!-- 1 -->
                    <div class="leaderboard-row">
                        <div class="rank-info">
                            <span class="rank-num">1</span>
                            <div class="rank-name"><span>School No. 160</span><span class="rank-badge">Baku</span></div>
                        </div>
                        <span class="rank-pts">12,450</span>
                    </div>
                    <!-- 2 -->
                    <div class="leaderboard-row">
                        <div class="rank-info">
                            <span class="rank-num">2</span>
                            <div class="rank-name"><span>Baku European Lyceum</span><span class="rank-badge">Baku</span></div>
                        </div>
                        <span class="rank-pts">11,200</span>
                    </div>
                    <!-- 3 -->
                    <div class="leaderboard-row">
                        <div class="rank-info">
                            <span class="rank-num">3</span>
                            <div class="rank-name"><span>Sumgait Gymnasium</span><span class="rank-badge">Sumgait</span></div>
                        </div>
                        <span class="rank-pts">9,800</span>
                    </div>
                    <!-- 4 -->
                    <div class="leaderboard-row">
                        <div class="rank-info">
                            <span class="rank-num">4</span>
                            <div class="rank-name"><span>Landau School</span><span class="rank-badge">Baku</span></div>
                        </div>
                        <span class="rank-pts">8,950</span>
                    </div>
                    <!-- 5 -->
                    <div class="leaderboard-row">
                        <div class="rank-info">
                            <span class="rank-num">5</span>
                            <div class="rank-name"><span>Quba High School No. 2</span><span class="rank-badge">Quba</span></div>
                        </div>
                        <span class="rank-pts">7,600</span>
                    </div>
                </div>

                <!-- STUDENT LIST (TOP 5) -->
                <div id="list-student" class="leaderboard-list">
                    <!-- 1 -->
                    <div class="leaderboard-row">
                        <div class="rank-info">
                            <span class="rank-num">1</span>
                            <div class="rank-name"><span>Ali Mammadov</span><span class="rank-badge" style="color:var(--primary-green)">Green Leader</span></div>
                        </div>
                        <span class="rank-pts">2,250</span>
                    </div>
                    <!-- 2 -->
                    <div class="leaderboard-row">
                        <div class="rank-info">
                            <span class="rank-num">2</span>
                            <div class="rank-name"><span>Leyla Aliyeva</span><span class="rank-badge" style="color:var(--game-blue)">Nature Hero</span></div>
                        </div>
                        <span class="rank-pts">1,100</span>
                    </div>
                    <!-- 3 -->
                    <div class="leaderboard-row">
                        <div class="rank-info">
                            <span class="rank-num">3</span>
                            <div class="rank-name"><span>Orkhan Valiyev</span><span class="rank-badge">Eco Beginner</span></div>
                        </div>
                        <span class="rank-pts">450</span>
                    </div>
                    <!-- 4 -->
                    <div class="leaderboard-row">
                        <div class="rank-info">
                            <span class="rank-num">4</span>
                            <div class="rank-name"><span>Aysel Guliyeva</span><span class="rank-badge">Eco Warrior</span></div>
                        </div>
                        <span class="rank-pts">410</span>
                    </div>
                    <!-- 5 -->
                    <div class="leaderboard-row">
                        <div class="rank-info">
                            <span class="rank-num">5</span>
                            <div class="rank-name"><span>Murad Huseynov</span><span class="rank-badge">Novice</span></div>
                        </div>
                        <span class="rank-pts">380</span>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- MAP -->
    <section class="map-section" id="map">
        <div class="section-header">
            <h2 data-lang="map_title">Regional Environmental Map</h2>
            <p data-lang="map_desc">Our system identifies local problems. Residents can view hotspots directly on the map.</p>
        </div>
        <div class="map-legend">
            <div class="legend-item"><div class="dot" style="background:red"></div> Air Pollution</div>
            <div class="legend-item"><div class="dot" style="background:orange"></div> Plastic Waste</div>
            <div class="legend-item"><div class="dot" style="background:brown"></div> Deforestation</div>
            <div class="legend-item"><div class="dot" style="background:blue"></div> Water Issues</div>
             <div class="legend-item"><div class="dot" style="background:purple"></div> Energy Waste</div>
        </div>
        <div id="google-map"></div>
    </section>

    <footer>
        <div class="footer-logo">
            <i class="fas fa-leaf"></i> EcoQuest
        </div>
        <p data-lang="footer_text">Empowering the youth of Azerbaijan to build a greener future through technology.</p>
        <div class="socials" style="margin-top:20px;">
            <i class="fab fa-instagram"></i>
            <i class="fab fa-facebook-f"></i>
            <i class="fab fa-twitter"></i>
            <i class="fab fa-linkedin-in"></i>
        </div>
        <p style="margin-top:30px; font-size:0.8rem; color:#777;">&copy; 2025 EcoQuest Project. All rights reserved.</p>
    </footer>

    <!-- ============================================ -->
    <!-- TASKS MENU MODAL                             -->
    <!-- ============================================ -->
    <div class="modal-overlay" id="tasks-modal">
        <div class="modal-box wide">
            <div class="modal-close" onclick="closeTaskModal()">&times;</div>
            <h2 style="text-align:center; color:var(--dark-green); margin-bottom:20px;" data-lang="tasks_title">Daily Eco Missions</h2>
            <p style="text-align:center; color:var(--text-light); margin-bottom:30px;" id="tasks-date-display"></p>
            
            <div class="task-list">
                
                <!-- Task 1: Plastic -->
                <div class="task-card" id="task-card-1">
                    <div class="task-header" onclick="toggleTask('task-1')">
                        <div class="task-info">
                            <div class="task-icon"><i class="fas fa-wine-bottle"></i></div>
                            <div>
                                <h4 data-lang="t1_title">Sort 10 Plastic Bottles</h4>
                                <small style="color:gray" data-lang="t1_desc">Separate plastic from general waste.</small>
                            </div>
                        </div>
                        <span class="task-points" id="pts-1">+50 Pts</span>
                    </div>
                    <div id="task-1" class="task-upload-area">
                        <div class="upload-box" onclick="triggerFileSelect('1')" id="box-1">
                            <i class="fas fa-video" style="font-size:2rem; color:#ccc;"></i>
                            <p id="text-1" data-lang="upload_txt">Tap to upload video proof (Face must be visible)</p>
                            <input type="file" id="file-1" style="display:none" accept="video/*" onchange="fileSelected(this, '1')">
                        </div>
                        <!-- Pass 'bottle' as target object, and 50 points -->
                        <button class="btn-submit" onclick="submitTask('1', 'bottle', 50)" id="btn-1" data-lang="btn_submit_task">Submit for AI Verification</button>
                    </div>
                </div>

                <!-- Task 2: Tree -->
                <div class="task-card" id="task-card-2">
                    <div class="task-header" onclick="toggleTask('task-2')">
                        <div class="task-info">
                            <div class="task-icon"><i class="fas fa-tint"></i></div>
                            <div>
                                <h4 data-lang="t2_title">Water a Public Tree</h4>
                                <small style="color:gray" data-lang="t2_desc">Help maintain greenery in your area.</small>
                            </div>
                        </div>
                        <span class="task-points" id="pts-2">+30 Pts</span>
                    </div>
                    <div id="task-2" class="task-upload-area">
                        <div class="upload-box" onclick="triggerFileSelect('2')" id="box-2">
                            <i class="fas fa-video" style="font-size:2rem; color:#ccc;"></i>
                            <p id="text-2" data-lang="upload_txt">Tap to upload video proof (Face must be visible)</p>
                            <input type="file" id="file-2" style="display:none" accept="video/*" onchange="fileSelected(this, '2')">
                        </div>
                        <button class="btn-submit" onclick="submitTask('2', 'plant', 30)" id="btn-2" data-lang="btn_submit_task">Submit for AI Verification</button>
                    </div>
                </div>

                <!-- Task 3: Cleaning -->
                <div class="task-card" id="task-card-3">
                    <div class="task-header" onclick="toggleTask('task-3')">
                        <div class="task-info">
                            <div class="task-icon"><i class="fas fa-broom"></i></div>
                            <div>
                                <h4 data-lang="t3_title">Clean Park Area (15 min)</h4>
                                <small style="color:gray" data-lang="t3_desc">Collect litter in a public park.</small>
                            </div>
                        </div>
                        <span class="task-points" id="pts-3">+100 Pts</span>
                    </div>
                    <div id="task-3" class="task-upload-area">
                        <div class="upload-box" onclick="triggerFileSelect('3')" id="box-3">
                            <i class="fas fa-video" style="font-size:2rem; color:#ccc;"></i>
                            <p id="text-3" data-lang="upload_txt">Tap to upload video proof (Face must be visible)</p>
                            <input type="file" id="file-3" style="display:none" accept="video/*" onchange="fileSelected(this, '3')">
                        </div>
                        <button class="btn-submit" onclick="submitTask('3', 'person', 100)" id="btn-3" data-lang="btn_submit_task">Submit for AI Verification</button>
                    </div>
                </div>

                 <!-- Task 4: Energy -->
                 <div class="task-card" id="task-card-4">
                    <div class="task-header" onclick="toggleTask('task-4')">
                        <div class="task-info">
                            <div class="task-icon"><i class="fas fa-lightbulb"></i></div>
                            <div>
                                <h4 data-lang="t4_title">Report Energy Waste</h4>
                                <small style="color:gray" data-lang="t4_desc">Video of street lights on during day.</small>
                            </div>
                        </div>
                        <span class="task-points" id="pts-4">+70 Pts</span>
                    </div>
                    <div id="task-4" class="task-upload-area">
                        <div class="upload-box" onclick="triggerFileSelect('4')" id="box-4">
                            <i class="fas fa-video" style="font-size:2rem; color:#ccc;"></i>
                            <p id="text-4" data-lang="upload_txt">Tap to upload video proof (Face must be visible)</p>
                            <input type="file" id="file-4" style="display:none" accept="video/*" onchange="fileSelected(this, '4')">
                        </div>
                        <button class="btn-submit" onclick="submitTask('4', 'any', 70)" id="btn-4" data-lang="btn_submit_task">Submit for AI Verification</button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- NEW: MY ACCOUNT MODAL -->
    <div class="modal-overlay" id="profile-modal">
        <div class="modal-box">
            <div class="modal-close" onclick="closeProfileModal()">&times;</div>
            
            <div class="profile-header">
                <div class="profile-avatar"><i class="fas fa-user"></i></div>
                <div class="profile-name" id="p-name">Guest User</div>
                <div class="profile-school" id="p-school">No School</div>
            </div>

            <div class="profile-stats-grid">
                <div class="p-stat-box">
                    <div class="p-stat-val" id="p-points">0</div>
                    <div class="p-stat-lbl">Total Points</div>
                </div>
                <div class="p-stat-box">
                    <div class="p-stat-val" style="font-size:1rem; margin-top:5px;" id="p-badge">Eco Beginner</div>
                    <div class="p-stat-lbl">Current Rank</div>
                </div>
            </div>

            <div style="text-align:center; margin-bottom:20px; color:#777; font-size:0.9rem;">
                Keep completing tasks to reach the next level!
            </div>

            <button class="btn-logout" onclick="logout()">Log Out</button>
        </div>
    </div>

    <!-- REAL AI PROCESSING MODAL -->
    <div class="modal-overlay" id="ai-processing-modal">
        <div class="modal-box">
            <div class="ai-content">
                <div class="spinner"></div>
                <h3 style="color:var(--dark-green);">Multi-Modal AI System</h3>
                <p style="font-size:0.8rem; color:gray; margin-bottom:20px;">Checking: Face + Object + Metadata</p>
                
                <div class="ai-step" id="ai-step-1"><i class="fas fa-fingerprint"></i> Verifying File Source (Anti-Cheat)...</div>
                <div class="ai-step" id="ai-step-2"><i class="fas fa-brain"></i> Loading Neural Networks...</div>
                <div class="ai-step" id="ai-step-3"><i class="fas fa-search"></i> Detecting Face & Objects...</div>
                <div class="ai-step" id="ai-step-4"><i class="fas fa-poll"></i> Finalizing Verification...</div>
                
                <!-- Hidden Video for AI to scan -->
                <video id="ai-video-player" playsinline muted></video>
            </div>
        </div>
    </div>

    <!-- AUTH MODAL -->
    <div class="modal-overlay" id="auth-modal">
        <div class="modal-box">
            <div class="modal-close" onclick="closeModal()">&times;</div>
            <div class="auth-tabs">
                <button class="auth-tab-btn active" id="tab-login" onclick="switchAuth('login')" data-lang="auth_login">Login</button>
                <button class="auth-tab-btn" id="tab-register" onclick="switchAuth('register')" data-lang="auth_signup">Sign Up</button>
            </div>
            
            <!-- Login Form -->
            <div id="form-login" class="auth-form active">
                <form onsubmit="event.preventDefault(); handleLogin();">
                    <div class="form-group">
                        <label data-lang="lbl_email">Email</label>
                        <input type="email" id="login-email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label data-lang="lbl_pass">Password</label>
                        <input type="password" id="login-pass" class="form-control" required>
                    </div>
                    <button type="submit" class="btn-submit" data-lang="btn_submit_login">Login to Account</button>
                    <div class="switch-link">
                        <span onclick="switchAuth('register')" data-lang="toggle_no_account">Don't have an account? Sign Up</span>
                    </div>
                </form>
            </div>

            <!-- Register Form -->
            <div id="form-register" class="auth-form">
                <form onsubmit="event.preventDefault(); handleRegister();">
                    <div class="form-row">
                        <div class="form-group" style="flex:1">
                            <label data-lang="lbl_name">Name</label>
                            <input type="text" id="reg-name" class="form-control" required>
                        </div>
                        <div class="form-group" style="flex:1">
                            <label data-lang="lbl_surname">Surname</label>
                            <input type="text" id="reg-surname" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label data-lang="lbl_school">School Name</label>
                        <input type="text" id="reg-school" class="form-control" placeholder="e.g. School No. 160" required>
                    </div>
                    <div class="form-group">
                        <label data-lang="lbl_email">Email</label>
                        <input type="email" id="reg-email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label data-lang="lbl_pass">Create Password</label>
                        <input type="password" id="reg-pass" class="form-control" required>
                    </div>
                    <button type="submit" class="btn-submit" data-lang="btn_submit_register">Register</button>
                    <div class="switch-link">
                        <span onclick="switchAuth('login')" data-lang="toggle_have_account">Already have an account? Login</span>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- LOGIC -->
    <script>
        // --- 1. LOCAL STORAGE DATABASE LOGIC ---
        
        let currentUserEmail = null; // The key to track session

        // Initialize App on Load
        window.onload = function() {
            checkDailyReset();
            // Check if user is already logged in
            const savedSession = localStorage.getItem('ecoSession');
            if (savedSession) {
                currentUserEmail = savedSession;
                updateUI();
            }
            // Init map
            initMap();
        }

        // --- GLOBAL HELPER FUNCTIONS ---

        // TABS SWITCHING
        function switchTab(type) {
            document.getElementById('btn-school').classList.remove('active');
            document.getElementById('btn-student').classList.remove('active');
            document.getElementById('btn-' + type).classList.add('active');
            
            document.getElementById('list-school').classList.remove('active');
            document.getElementById('list-student').classList.remove('active');
            document.getElementById('list-' + type).classList.add('active');
        }

        // DAILY RESET LOGIC (New Day = New Tasks)
        function checkDailyReset() {
            const today = new Date().toLocaleDateString();
            const lastRun = localStorage.getItem('ecoLastRunDate');

            if (lastRun !== today) {
                // It's a new day! Reset completed tasks for ALL users
                const allUsers = JSON.parse(localStorage.getItem('ecoUsers')) || {};
                for (let email in allUsers) {
                    allUsers[email].completedTasks = [];
                }
                localStorage.setItem('ecoUsers', JSON.stringify(allUsers));
                localStorage.setItem('ecoLastRunDate', today);
            }
            document.getElementById('tasks-date-display').innerText = "Tasks for: " + today;
        }

        // --- 2. AUTHENTICATION HANDLERS ---

        function handleRegister() {
            const name = document.getElementById('reg-name').value;
            const surname = document.getElementById('reg-surname').value;
            const school = document.getElementById('reg-school').value;
            const email = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-pass').value;

            let users = JSON.parse(localStorage.getItem('ecoUsers')) || {};

            if (users[email]) {
                alert("This email is already registered!");
                return;
            }

            // Create new user object
            users[email] = {
                name: name + " " + surname,
                school: school,
                password: pass,
                points: 0,
                completedTasks: []
            };

            localStorage.setItem('ecoUsers', JSON.stringify(users));
            
            // Auto Login
            loginUser(email);
            closeModal();
            alert("Registration Successful! Welcome.");
        }

        function handleLogin() {
            const email = document.getElementById('login-email').value;
            const pass = document.getElementById('login-pass').value;
            let users = JSON.parse(localStorage.getItem('ecoUsers')) || {};

            if (users[email] && users[email].password === pass) {
                loginUser(email);
                closeModal();
                alert("Welcome back, " + users[email].name);
            } else {
                alert("Invalid Email or Password");
            }
        }

        function loginUser(email) {
            currentUserEmail = email;
            localStorage.setItem('ecoSession', email);
            updateUI();
        }

        function logout() {
            localStorage.removeItem('ecoSession');
            currentUserEmail = null;
            closeProfileModal();
            updateUI();
            alert("Logged Out Successfully");
        }

        function updateUI() {
            const joinBtn = document.getElementById('btn-join-trigger');
            const profileBtn = document.getElementById('btn-profile-trigger');
            
            // Reset Task UI visual state
            document.querySelectorAll('.task-card').forEach(c => c.classList.remove('completed'));
            document.querySelectorAll('.btn-submit').forEach(b => {
                if(b.innerText === "Mission Accomplished") {
                    b.innerText = "Submit for AI Verification";
                    b.style.background = "var(--primary-green)";
                }
            });

            if (currentUserEmail) {
                joinBtn.style.display = 'none';
                profileBtn.style.display = 'flex';
                
                // Load User Data
                let users = JSON.parse(localStorage.getItem('ecoUsers'));
                let user = users[currentUserEmail];

                // Update Profile Modal
                document.getElementById('p-name').innerText = user.name;
                document.getElementById('p-school').innerText = user.school;
                document.getElementById('p-points').innerText = user.points;
                document.getElementById('p-badge').innerText = getBadge(user.points);

                // Update Tasks (Lock completed ones)
                if (user.completedTasks) {
                    user.completedTasks.forEach(id => {
                        const card = document.getElementById('task-card-' + id);
                        const btn = document.getElementById('btn-' + id);
                        const pts = document.getElementById('pts-' + id);
                        if(card) {
                            card.classList.add('completed');
                            btn.innerText = "Mission Accomplished";
                            btn.style.background = "#2ecc71";
                            pts.innerText = "Completed";
                            pts.style.background = "#2ecc71";
                            pts.style.color = "white";
                        }
                    });
                }

            } else {
                joinBtn.style.display = 'inline-block';
                profileBtn.style.display = 'none';
            }
        }

        function getBadge(points) {
            if(points < 100) return "Eco Beginner";
            if(points < 300) return "Nature Hero";
            return "Green Leader";
        }

        // --- 3. MODAL TRIGGERS ---
        const modal = document.getElementById('auth-modal');
        const taskModal = document.getElementById('tasks-modal');
        const aiModal = document.getElementById('ai-processing-modal');
        const profileModal = document.getElementById('profile-modal');
        const joinTrigger = document.getElementById('btn-join-trigger');

        joinTrigger.addEventListener('click', (e) => { e.preventDefault(); openModal(); });

        function openModal() { modal.style.display = 'flex'; }
        function closeModal() { modal.style.display = 'none'; }
        
        function openTaskModal() { 
            if(!currentUserEmail) {
                alert("Please login to your account to view tasks.");
                openModal();
                return;
            }
            taskModal.style.display = 'flex'; 
        }
        function closeTaskModal() { taskModal.style.display = 'none'; }
        function openProfileModal() { profileModal.style.display = 'flex'; }
        function closeProfileModal() { profileModal.style.display = 'none'; }

        window.onclick = function(event) {
            if (event.target == modal) closeModal();
            if (event.target == taskModal) closeTaskModal();
            if (event.target == profileModal) closeProfileModal();
        }

        function switchAuth(type) {
            document.getElementById('tab-login').classList.remove('active');
            document.getElementById('tab-register').classList.remove('active');
            document.getElementById('tab-' + type).classList.add('active');
            document.getElementById('form-login').classList.remove('active');
            document.getElementById('form-register').classList.remove('active');
            document.getElementById('form-' + type).classList.add('active');
        }

        function toggleTask(id) {
            let users = JSON.parse(localStorage.getItem('ecoUsers'));
            let user = users[currentUserEmail];
            if(user.completedTasks.includes(id)) return; // Locked

            const el = document.getElementById(id);
            if(el.classList.contains('active')) {
                el.classList.remove('active');
            } else {
                document.querySelectorAll('.task-upload-area').forEach(d => d.classList.remove('active'));
                el.classList.add('active');
            }
        }

        function triggerFileSelect(id) { document.getElementById('file-' + id).click(); }
        function fileSelected(input, id) {
            if (input.files && input.files[0]) {
                const fileName = input.files[0].name;
                const box = document.getElementById('box-' + id);
                const text = document.getElementById('text-' + id);
                box.classList.add('has-file');
                text.innerHTML = `<strong>Selected:</strong> ${fileName}<br><span style="font-size:0.8rem; color:green;">Ready to upload</span>`;
            }
        }

        // --- 4. AI VERIFICATION & POINT UPDATES ---
        async function submitTask(id, targetObject, points) {
            
            // 1. Check if user is logged in
            if(!currentUserEmail) {
                alert("Please login first.");
                return;
            }

            // 2. Check if already completed (Double check)
            let users = JSON.parse(localStorage.getItem('ecoUsers'));
            if(users[currentUserEmail].completedTasks.includes(id)) {
                alert("You have already completed this mission!");
                return;
            }

            const fileInput = document.getElementById('file-' + id);
            
            if (!fileInput.files || fileInput.files.length === 0) {
                alert("Please select a video file first!");
                return;
            }
            
            const file = fileInput.files[0];
            
            closeTaskModal();
            aiModal.style.display = 'flex';
            
            // Reset steps
            [1,2,3,4].forEach(i => {
                const s = document.getElementById(`ai-step-${i}`);
                s.className = 'ai-step'; s.style.color = '';
            });

            try {
                // Step 1
                document.getElementById('ai-step-1').classList.add('active');
                await new Promise(r => setTimeout(r, 1000));
                document.getElementById('ai-step-1').classList.add('success');

                // Step 2
                document.getElementById('ai-step-2').classList.add('active');
                const videoEl = document.getElementById('ai-video-player');
                videoEl.src = URL.createObjectURL(file);
                await new Promise((resolve) => { videoEl.onloadedmetadata = () => resolve(); });
                
                const faceModel = await blazeface.load();
                const objectModel = await cocoSsd.load(); 

                document.getElementById('ai-step-2').classList.add('success');

                // Step 3
                document.getElementById('ai-step-3').classList.add('active');
                videoEl.currentTime = 1.0; 
                await new Promise(r => setTimeout(r, 500));

                const faces = await faceModel.estimateFaces(videoEl, false);
                const objects = await objectModel.detect(videoEl);
                
                let hasObject = false;
                
                if (targetObject === 'any') {
                    hasObject = true; 
                } else if (targetObject === 'bottle') {
                    hasObject = objects.some(obj => obj.class === 'bottle' || obj.class === 'cup');
                } else if (targetObject === 'plant') {
                    hasObject = objects.some(obj => obj.class === 'potted plant' || obj.class === 'vase' || obj.class === 'tree');
                } else if (targetObject === 'person') {
                    hasObject = objects.some(obj => obj.class === 'person');
                }

                // Step 4
                document.getElementById('ai-step-3').classList.remove('active');
                document.getElementById('ai-step-4').classList.add('active');
                await new Promise(r => setTimeout(r, 800));

                aiModal.style.display = 'none';

                const hasFace = faces.length > 0;

                if (hasFace && hasObject) {
                    // SUCCESS - UPDATE DATA
                    let users = JSON.parse(localStorage.getItem('ecoUsers'));
                    users[currentUserEmail].points += points;
                    users[currentUserEmail].completedTasks.push(id);
                    localStorage.setItem('ecoUsers', JSON.stringify(users));
                    
                    updateUI();
                    alert(`‚úÖ MISSION COMPLETE!\n\n+${points} Points added to your account!`);
                } 
                else if (!hasFace) {
                    alert("‚ùå VERIFICATION FAILED: No Face Detected.\n\nTo prevent cheating, your face must be clearly visible.");
                } 
                else if (!hasObject) {
                    alert(`‚ùå VERIFICATION FAILED: Task Incomplete.\n\nWe detected your face, but we could not find a '${targetObject}' in the video.`);
                }

                URL.revokeObjectURL(videoEl.src);
                videoEl.src = "";

            } catch (error) {
                console.error(error);
                aiModal.style.display = 'none';
                alert("AI Processing Error. Please try a clearer video file.");
            }
        }

        // --- 5. GOOGLE MAPS ---
        function initMap() {
            const azerbaijanCenter = { lat: 40.5, lng: 48.5 };
            const map = new google.maps.Map(document.getElementById("google-map"), {
                zoom: 7, center: azerbaijanCenter,
                styles: [{"featureType": "poi.park","elementType": "geometry.fill","stylers": [{"color": "#aadd55"}]}]
            });
            const locations = [
                { pos: { lat: 40.4093, lng: 49.8671 }, title: "Baku: Air Pollution", color: "red" },
                { pos: { lat: 40.5897, lng: 49.6686 }, title: "Sumgait: Plastic Waste", color: "orange" },
                { pos: { lat: 41.3643, lng: 48.5269 }, title: "Quba: Deforestation", color: "brown" },
                { pos: { lat: 38.7523, lng: 48.8475 }, title: "Lankaran: Water Contamination", color: "blue" },
                { pos: { lat: 40.7632, lng: 47.0496 }, title: "Mingachevir: Energy Waste", color: "purple" }
            ];
            locations.forEach(loc => {
                const marker = new google.maps.Marker({
                    position: loc.pos, map: map, title: loc.title,
                    icon: `http://maps.google.com/mapfiles/ms/icons/${loc.color}-dot.png`
                });
                const infoWindow = new google.maps.InfoWindow({ content: `<div style="color:black"><b>${loc.title}</b><br>Active Task Zone</div>` });
                marker.addListener("click", () => { infoWindow.open(map, marker); });
            });
        }

        // --- 6. TRANSLATIONS (FULL) ---
        const translations = {
            en: {
                nav_how: "How it Works", nav_league: "Rankings", nav_map: "Live Map", nav_tasks: "Tasks", btn_join: "Join Quest",
                hero_tag: "Gamified Ecological Awareness", hero_title: "Turn Environmental Action into a Game", hero_desc: "Sort waste, plant trees, and clean your city to earn points. Join the Eco-League and help solve real environmental issues in Azerbaijan.",
                btn_start: "Start Now", app_verified: "AI Verified!", app_points: "+50 Points", badge_level: "Nature Hero", badge_trees: "Plastic Sorted",
                stat_game: "Students prefer Game-based Learning", stat_parents: "Parents want informed children", stat_students: "Willing to do Eco-tasks",
                step_title: "How EcoQuest Works", step_desc: "Our AI-powered system makes saving the planet simple, fun, and rewarding.",
                step_1_title: "1. Get a Task", step_1_desc: "Receive a daily mission based on your city (e.g., 'Sort plastic in Sumgait').",
                step_2_title: "2. Record Video", step_2_desc: "Record a video completing the task. Your face must be visible!",
                step_3_title: "3. AI Verification", step_3_desc: "Our AI analyzes the video frame-by-frame to verify facial identity and task accuracy.",
                step_4_title: "4. Earn Rewards", step_4_desc: "Get points, unlock 'Nature Hero' badges, and climb the leaderboard.",
                league_title: "The Eco-League & Rankings", league_desc: "We rank both schools and individual students. Complete tasks to earn points!",
                feat_1_title: "Inter-School Competition", feat_1_desc: "Schools compete for the 'Green Flag' award.",
                feat_2_title: "Student Levels", feat_2_desc: "Progress from Eco Beginner to Green Leader.",
                tab_schools: "üè´ Top Schools", tab_students: "üë§ Top Students", 
                map_title: "Regional Environmental Map", map_desc: "Our system identifies local problems. Residents can view hotspots directly on the map.",
                auth_login: "Login", auth_signup: "Sign Up", lbl_email: "Email", lbl_pass: "Password",
                lbl_name: "Name", lbl_surname: "Surname", lbl_dob: "Date of Birth", lbl_school: "School Name",
                lbl_school_pass: "School Password", btn_submit_login: "Login to Account", btn_submit_register: "Join the Ranking",
                toggle_no_account: "Don't have an account? Sign Up", toggle_have_account: "Already have an account? Login",
                footer_text: "Empowering the youth of Azerbaijan to build a greener future through technology.",
                tasks_title: "Daily Eco Missions", tasks_subtitle: "Complete tasks, upload video proof with your face visible, and earn points.",
                t1_title: "Sort 10 Plastic Bottles", t1_desc: "Separate plastic from general waste.",
                t2_title: "Water a Public Tree", t2_desc: "Help maintain greenery in your area.",
                t3_title: "Clean Park Area (15 min)", t3_desc: "Collect litter in a public park.",
                t4_title: "Report Energy Waste", t4_desc: "Video of street lights on during day.",
                upload_txt: "Tap to upload video proof (Face must be visible)", btn_submit_task: "Submit for AI Verification"
            },
            az: {
                nav_how: "Nec…ô ƒ∞≈ül…ôyir", nav_league: "Reytinql…ôr", nav_map: "Canlƒ± X…ôrit…ô", nav_tasks: "Tap≈üƒ±rƒ±qlar", btn_join: "Qo≈üul",
                hero_tag: "Oyunla≈üdƒ±rƒ±lmƒ±≈ü Ekoloji Maarifl…ôndirm…ô", hero_title: "Ekoloji F…ôaliyy…ôti Oyuna √áevirin", hero_desc: "Xal qazanmaq √º√ß√ºn tullantƒ±larƒ± ayƒ±rƒ±n, aƒüac …ôkin v…ô ≈ü…ôh…ôrinizi t…ômizl…ôyin. Eko-Liqaya qo≈üulun.",
                btn_start: "ƒ∞ndi Ba≈üla", app_verified: "AI T…ôsdiql…ôdi!", app_points: "+50 Xal", badge_level: "T…ôbi…ôt Q…ôhr…ômanƒ±", badge_trees: "Plastik Ayrƒ±ldƒ±",
                stat_game: "T…ôl…ôb…ô oyunla √∂yr…ônm…ôyi se√ßir", stat_parents: "Valideyn maarifl…ônm…ô ist…ôyir", stat_students: "Eko-tap≈üƒ±rƒ±qlarƒ± etm…ôy…ô hazƒ±r",
                step_title: "EcoQuest Nec…ô ƒ∞≈ül…ôyir", step_desc: "S√ºni intellekt sistemimiz planeti xilas etm…ôyi sad…ô, …ôyl…ônc…ôli v…ô m√ºkafatlƒ± edir.",
                step_1_title: "1. Tap≈üƒ±rƒ±q Alƒ±n", step_1_desc: "≈û…ôh…ôriniz…ô …ôsaslanan g√ºnd…ôlik missiya alƒ±n (m…ôs: 'Sumqayƒ±tda plastik ayƒ±r').",
                step_2_title: "2. Video √á…ôkin", step_2_desc: "Tap≈üƒ±rƒ±ƒüƒ± ed…ôrk…ôn video √ß…ôkin. √úz√ºn√ºz g√∂r√ºnm…ôlidir!",
                step_3_title: "3. AI T…ôsdiqi", step_3_desc: "AI √ºz√ºn√ºz√º tanƒ±maq v…ô tap≈üƒ±rƒ±ƒüƒ± yoxlamaq √º√ß√ºn videonu analiz edir.",
                step_4_title: "4. M√ºkafat Qazanƒ±n", step_4_desc: "Xallar toplayƒ±n, 'T…ôbi…ôt Q…ôhr…ômanƒ±' ni≈üanlarƒ±nƒ± a√ßƒ±n v…ô liderl…ôr c…ôdv…ôlind…ô y√ºks…ôlin.",
                league_title: "Eko-Liqa v…ô Reytinql…ôr", league_desc: "Biz h…ôm m…ôkt…ôbl…ôri, h…ôm d…ô f…ôrdi t…ôl…ôb…ôl…ôri sƒ±ralayƒ±rƒ±q.",
                feat_1_title: "M…ôkt…ôbl…ôrarasƒ± Yarƒ±≈ü", feat_1_desc: "M…ôkt…ôbl…ôr 'Ya≈üƒ±l Bayraq' m√ºkafatƒ± uƒürunda m√ºbariz…ô aparƒ±r.",
                feat_2_title: "T…ôl…ôb…ô S…ôviyy…ôl…ôri", feat_2_desc: "Eko Yeni Ba≈ülayandan Ya≈üƒ±l Lider…ô y√ºks…ôlin.",
                tab_schools: "üè´ M…ôkt…ôbl…ôr", tab_students: "üë§ T…ôl…ôb…ôl…ôr", 
                map_title: "Regional Ekoloji X…ôrit…ô", map_desc: "Sistemimiz yerli probleml…ôri m√º…ôyy…ôn edir. Sakinl…ôr problemli n√∂qt…ôl…ôri x…ôrit…ôd…ô g√∂r…ô bil…ôr.",
                auth_login: "Giri≈ü", auth_signup: "Qeydiyyat", lbl_email: "E-po√ßt", lbl_pass: "≈ûifr…ô",
                lbl_name: "Ad", lbl_surname: "Soyad", lbl_dob: "Doƒüum Tarixi", lbl_school: "M…ôkt…ôbin Adƒ±",
                lbl_school_pass: "M…ôkt…ôb ≈ûifr…ôsi", btn_submit_login: "Hesaba Giri≈ü", btn_submit_register: "Reytinq…ô Qo≈üul",
                toggle_no_account: "Hesabƒ±nƒ±z yoxdur? Qeydiyyatdan ke√ßin", toggle_have_account: "Hesabƒ±nƒ±z var? Giri≈ü",
                footer_text: "Texnologiya vasit…ôsil…ô daha ya≈üƒ±l g…ôl…ôc…ôk qurmaq √º√ß√ºn Az…ôrbaycan g…ôncl…ôrini g√ºcl…ôndiririk.",
                tasks_title: "G√ºnd…ôlik Eko-Missiyalar", tasks_subtitle: "Tap≈üƒ±rƒ±qlarƒ± edin, √ºz√ºn√ºz g√∂r√ºn…ôn video y√ºkl…ôyin v…ô xal qazanƒ±n.",
                t1_title: "10 Plastik Qab Ayƒ±rƒ±n", t1_desc: "Plastiki √ºmumi tullantƒ±dan ayƒ±rƒ±n.",
                t2_title: "Aƒüac Sulayƒ±n", t2_desc: "∆èrazinizd…ôki ya≈üƒ±llƒ±ƒüƒ± qoruyun.",
                t3_title: "Parkƒ± T…ômizl…ôyin (15 d…ôq)", t3_desc: "ƒ∞ctimai parkda zibil toplayƒ±n.",
                t4_title: "Enerji ƒ∞srafƒ±nƒ± Bildirin", t4_desc: "G√ºnd√ºz yanan i≈üƒ±qlarƒ±n videosunu √ß…ôkin.",
                upload_txt: "Video s√ºbutunu y√ºkl…ôyin (√úz√ºn√ºz g√∂r√ºnm…ôlidir)", btn_submit_task: "AI Yoxlanƒ±≈üƒ± √º√ß√ºn G√∂nd…ôr"
            },
            ru: {
                nav_how: "–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç", nav_league: "–†–µ–π—Ç–∏–Ω–≥–∏", nav_map: "–ö–∞—Ä—Ç–∞", nav_tasks: "–ó–∞–¥–∞–Ω–∏—è", btn_join: "–í—Å—Ç—É–ø–∏—Ç—å",
                hero_tag: "–ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è –≠–∫–æ–ª–æ–≥–∏–∏", hero_title: "–ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç–µ –≠–∫–æ–ª–æ–≥–∏—é –≤ –ò–≥—Ä—É", hero_desc: "–°–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –æ—Ç—Ö–æ–¥—ã, —Å–∞–∂–∞–π—Ç–µ –¥–µ—Ä–µ–≤—å—è –∏ –æ—á–∏—â–∞–π—Ç–µ —Å–≤–æ–π –≥–æ—Ä–æ–¥, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—á–∫–∏.",
                btn_start: "–ù–∞—á–∞—Ç—å", app_verified: "AI –ü–æ–¥—Ç–≤–µ—Ä–¥–∏–ª!", app_points: "+50 –û—á–∫–æ–≤", badge_level: "–ì–µ—Ä–æ–π –ü—Ä–∏—Ä–æ–¥—ã", badge_trees: "–ü–ª–∞—Å—Ç–∏–∫",
                stat_game: "–°—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤—ã–±–∏—Ä–∞—é—Ç –∏–≥—Ä—É", stat_parents: "–†–æ–¥–∏—Ç–µ–ª–∏ –∑–∞ –ø—Ä–æ—Å–≤–µ—â–µ–Ω–∏–µ", stat_students: "–ì–æ—Ç–æ–≤—ã –∫ —ç–∫–æ-–∑–∞–¥–∞—á–∞–º",
                step_title: "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç EcoQuest", step_desc: "–ù–∞—à –ò–ò –¥–µ–ª–∞–µ—Ç —Å–ø–∞—Å–µ–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç—ã –ø—Ä–æ—Å—Ç—ã–º, –≤–µ—Å–µ–ª—ã–º –∏ –≤—ã–≥–æ–¥–Ω—ã–º.",
                step_1_title: "1. –ü–æ–ª—É—á–∏—Ç–µ –ó–∞–¥–∞–Ω–∏–µ", step_1_desc: "–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –º–∏—Å—Å–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ –≥–æ—Ä–æ–¥–∞ (–Ω–∞–ø—Ä. '–ü–ª–∞—Å—Ç–∏–∫ –≤ –°—É–º–≥–∞–π—ã—Ç–µ').",
                step_2_title: "2. –ó–∞–ø–∏—à–∏—Ç–µ –í–∏–¥–µ–æ", step_2_desc: "–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –∫–∞–º–µ—Ä—É. –í–∞—à–µ –ª–∏—Ü–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ!",
                step_3_title: "3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ò–ò", step_3_desc: "–ù–∞—à –ò–ò –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ª–∏—á–Ω–æ—Å—Ç–∏ –∏ –∑–∞–¥–∞—á–∏.",
                step_4_title: "4. –ù–∞–≥—Ä–∞–¥—ã", step_4_desc: "–ü–æ–ª—É—á–∞–π—Ç–µ –æ—á–∫–∏, –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –∑–Ω–∞—á–∫–∏ ¬´–ì–µ—Ä–æ–π –ü—Ä–∏—Ä–æ–¥—ã¬ª –∏ –ø–æ–¥–Ω–∏–º–∞–π—Ç–µ—Å—å –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ.",
                league_title: "–≠–∫–æ-–õ–∏–≥–∞ –∏ –†–µ–π—Ç–∏–Ω–≥–∏", league_desc: "–ú—ã –æ—Ü–µ–Ω–∏–≤–∞–µ–º –∫–∞–∫ —à–∫–æ–ª—ã, —Ç–∞–∫ –∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.",
                feat_1_title: "–®–∫–æ–ª—å–Ω—ã–µ –°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è", feat_1_desc: "–®–∫–æ–ª—ã —Å–æ—Ä–µ–≤–Ω—É—é—Ç—Å—è –∑–∞ –Ω–∞–≥—Ä–∞–¥—É ¬´–ó–µ–ª–µ–Ω—ã–π –§–ª–∞–≥¬ª.",
                feat_2_title: "–£—Ä–æ–≤–Ω–∏ –°—Ç—É–¥–µ–Ω—Ç–æ–≤", feat_2_desc: "–û—Ç –ù–æ–≤–∏—á–∫–∞ –¥–æ –ó–µ–ª–µ–Ω–æ–≥–æ –õ–∏–¥–µ—Ä–∞.",
                tab_schools: "üè´ –®–∫–æ–ª—ã", tab_students: "üë§ –°—Ç—É–¥–µ–Ω—Ç—ã", 
                map_title: "–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω–∞—è –≠–∫–æ-–ö–∞—Ä—Ç–∞", map_desc: "–°–∏—Å—Ç–µ–º–∞ –≤—ã—è–≤–ª—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã. –ñ–∏—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –≥–æ—Ä—è—á–∏–µ —Ç–æ—á–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ.",
                auth_login: "–í—Ö–æ–¥", auth_signup: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è", lbl_email: "Email", lbl_pass: "–ü–∞—Ä–æ–ª—å",
                lbl_name: "–ò–º—è", lbl_surname: "–§–∞–º–∏–ª–∏—è", lbl_dob: "–î–∞—Ç–∞ –†–æ–∂–¥–µ–Ω–∏—è", lbl_school: "–ù–∞–∑–≤–∞–Ω–∏–µ –®–∫–æ–ª—ã",
                lbl_school_pass: "–ü–∞—Ä–æ–ª—å –®–∫–æ–ª—ã", btn_submit_login: "–í–æ–π—Ç–∏", btn_submit_register: "–í—Å—Ç—É–ø–∏—Ç—å –≤ –†–µ–π—Ç–∏–Ω–≥",
                toggle_no_account: "–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è", toggle_have_account: "–ï—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏",
                footer_text: "–í–¥–æ—Ö–Ω–æ–≤–ª—è–µ–º –º–æ–ª–æ–¥–µ–∂—å –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω–∞ —Å—Ç—Ä–æ–∏—Ç—å –∑–µ–ª–µ–Ω–æ–µ –±—É–¥—É—â–µ–µ.",
                tasks_title: "–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –≠–∫–æ-–ú–∏—Å—Å–∏–∏", tasks_subtitle: "–í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è, –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ –≤–∏–¥–µ–æ —Å –ª–∏—Ü–æ–º –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –æ—á–∫–∏.",
                t1_title: "–°–æ–±–µ—Ä–∏—Ç–µ 10 –ë—É—Ç—ã–ª–æ–∫", t1_desc: "–û—Ç–¥–µ–ª–∏—Ç–µ –ø–ª–∞—Å—Ç–∏–∫ –æ—Ç –æ–±—â–µ–≥–æ –º—É—Å–æ—Ä–∞.",
                t2_title: "–ü–æ–ª–µ–π—Ç–µ –î–µ—Ä–µ–≤–æ", t2_desc: "–ü–æ–º–æ–≥–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–µ–ª–µ–Ω—å –≤ –≤–∞—à–µ–º —Ä–∞–π–æ–Ω–µ.",
                t3_title: "–£–±–æ—Ä–∫–∞ –ü–∞—Ä–∫–∞ (15 –º–∏–Ω)", t3_desc: "–°–æ–±–µ—Ä–∏—Ç–µ –º—É—Å–æ—Ä –≤ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–º –ø–∞—Ä–∫–µ.",
                t4_title: "–°–æ–æ–±—â–∏—Ç—å –æ–± –≠–Ω–µ—Ä–≥–∏–∏", t4_desc: "–í–∏–¥–µ–æ —Ñ–æ–Ω–∞—Ä–µ–π, –≥–æ—Ä—è—â–∏—Ö –¥–Ω–µ–º.",
                upload_txt: "–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ-–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ (–õ–∏—Ü–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ)", btn_submit_task: "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ü—Ä–æ–≤–µ—Ä–∫—É AI"
            }
        };

        function setLanguage(lang) {
            const elements = document.querySelectorAll('[data-lang]');
            elements.forEach(el => {
                const key = el.getAttribute('data-lang');
                if (translations[lang][key]) el.innerText = translations[lang][key];
            });
            document.getElementById('current-lang-text').innerText = lang.toUpperCase();
        }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDicmjtzsB8NX1qbo3vTb_tD1ohqui_K7s&callback=initMap"></script>
</body>
</html>